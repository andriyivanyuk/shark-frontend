<div class="product-form-container">
  <div class="header-wrapper">
    <p class="header-title">Створити продукт</p>
    <div class="custom-field-button">
      <button
        mat-icon-button
        matTooltip="Додати нове поле"
        (click)="openDialog()"
      >
        <mat-icon>add</mat-icon>
      </button>
    </div>
  </div>

  <form [formGroup]="productForm" class="product-form">
    <mat-form-field appearance="fill">
      <mat-label>Заголовок</mat-label>
      <input matInput formControlName="title" />
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Ціна</mat-label>
      <input matInput type="number" formControlName="price" />
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Категорія</mat-label>
      <input matInput formControlName="category" />
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Опис</mat-label>
      <textarea matInput formControlName="description"> </textarea>
    </mat-form-field>

    @for (field of customFields; track field) {
    <mat-form-field appearance="fill">
      <mat-label>{{ field.name }}</mat-label>
      <input matInput [formControlName]="field.name" />
    </mat-form-field>
    }

    <input
      class="main-file"
      type="file"
      id="file"
      (change)="onFileSelected($event)"
    />
    <label class="main-file" for="file" mat-raised-button color="primary"
      >Виберіть зображення</label
    >
    <div class="btn-group">
      <button
        [disabled]="!productForm.valid"
        class="submit-btn"
        mat-raised-button
        color="accent"
        type="submit"
        (click)="submitProduct()"
      >
        Створити Продукт
      </button>
    </div>
  </form>
</div>
